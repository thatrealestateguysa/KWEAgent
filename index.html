<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KW Explore Agent</title>

    <meta name="theme-color" content="#dc2626">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="KWE App">
    <link rel="apple-touch-icon" href="assets/icon-180.png">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/favicon-32.png">
    <link rel="icon" type="image/png" href="assets/icon.png">
    <link rel="manifest" href="manifest.json">

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .main-nav-button.active { background-color: #dc2626; color:#ffffff; }
        .sub-tab.active { background-color: #ef4444; color:#ffffff; }
        .tab-content, .sub-tab-content { display:none; }
        .tab-content.active, .sub-tab-content.active { display:block; }
    </style>
</head>
<body class="bg-black text-white">

    <div id="app-container" class="max-w-4xl mx-auto p-4 md:p-6">
        <header class="text-center mb-6 flex flex-col items-center">
            <img src="assets/icon-512.png" alt="KW Explore Agent Dashboard Icon" class="w-40 h-40 mb-4 rounded-xl shadow-lg">
            <h1 class="text-2xl font-bold">KW Explore Agent Dashboard</h1>
        </header>

        <section class="mb-8 grid grid-cols-1 sm:grid-cols-3 gap-3">
            <a href="https://calendar.google.com/" target="_blank" class="block w-full bg-gray-700 hover:bg-gray-600 text-white font-bold py-3 px-4 rounded-lg text-center transition duration-300">My Calendar</a>
            <a href="https://mail.google.com/" target="_blank" class="block w-full bg-gray-700 hover:bg-gray-600 text-white font-bold py-3 px-4 rounded-lg text-center transition duration-300">My Mail</a>
            <a href="https://thatrealestateguysa.github.io/learnmore/" target="_blank" class="block w-full bg-gray-700 hover:bg-gray-600 text-white font-bold py-3 px-4 rounded-lg text-center transition duration-300">Refer a New Agent</a>
        </section>

        <nav class="mb-6">
            <div id="main-tabs-container" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-2" aria-label="Tabs"></div>
        </nav>

        <main id="tab-content-area"></main>
        <footer class="text-center mt-12 h-16"></footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const tabsData = {
                "Do Not Call Lists": [
                    { title: "Virtual Agent", url: "https://www.thevirtualagent.co.za/info/#c-tab3-5" },
                    { title: "CMA Info", url: "https://www.cmainfo.co.za/privacy.aspx" }
                ],
                "Systems & Tools": [
                    { title: "Mapp - Listing Platform", url: "https://mapp.kwsouthafrica.co.za/Account/Login?returnUrl=%2F" },
                    { title: "KW Command", url: "https://authn.kw.com/as/authorize?client_id=6446ccf1-d9ef-43d3-b4a5-fedf42fbe53e&code_challenge=sgjp7lM5ZAD-2KMnd_IEj1M2p-5uptKqYmGWJBnbpk0&code_challenge_method=S256&redirect_uri=https%3A%2F%2Fconsole.command.kw.com%2Fauth%2Fcallback&response_type=code&scope=openid+profile+email+command&state=eyJhbGciOiJSU0EtT0FFUCIsImVuYyI6IkEyNTZHQ00ifQ.FfXRcR4v7rDs5yyCO6nk1f57Ogs8ZoAjdnfqhv9TbTUd1bTGQLvnQp0ti0fRVTE437L3Fgf8DyDMCrcSDXkaN3ZJFcd6-s24KoG0CnLWiV-p00UiEF0gqW_pMXozaMBe6qQIKVu-VD9nzFKnH1RjkppLUws2l5_1-wz-OC9hQpnjv3isiv1NpqCZfhI5iJKpbF9VlzXjZF2qyeHIKC5IJrKkX9Sz6u3px5QSLv3mNsQQqSUNv4k4xFaZW8qazboxfPmOdOBATXJXdHILvDDOvgHx2rdsMDqt3jol73n9rFDrLIXTdNyHl0fN5o2zU8OjxurjbCZ7Xx1JRVSZXX1t-w.uyCnnxZrr01diqy2.W2vgXbUl3tXjHTI0mxtRYlWXGu0NzKZOKlVFaQQ1_axCAdOeJU6ikCyvZ3YP62w26hWZQiYkJ54jqegjfHPs_RgSi7Sdyc_-qmOAwrAijPDyXCxciQ1P5VncbLlyqIDKAf-HPke8v19L_VFavIsy4lqO_mCh1piXfB_NhVdvJq_Tz2ozkBWd9Z7Ocuk.fpg6lph9Zz7gYbTo3wjK8g" },
                    { title: "The Virtual Agent", url: "https://app.thevirtualagent.co.za/user/sign-in" },
                    { title: "Lightstone", url: "https://toolkit.lightstone.co.za/#/" },
                    { title: "CMA Info - Signup with MCA", url: "https://www.cmainfo.co.za/" }
                ],
                "Tech": [
                    { title: "Book 1-on-1", url: "https://calendar.app.google/8351gr38GWZpT1vL7" },
                    { title: "Command 66 Day Challenge", url: "https://www.youtube.com/playlist?list=PLK75KZDqV1zlNlNbAYLPDegh4Rje76NNL" },
                    { title: "FAQ Command", url: "https://answers.kw.com/hc/en-us" }
                ],
                "Documentation": [
                    { title: "Agent Toolkit", url: "https://drive.google.com/drive/folders/17t9lC6d9cZHPltRiKw3CVtporeDzxTbT" }
                ],
                "Letter of Employment": [
                    { title: "General Letter of Employment", url: "https://docs.google.com/forms/d/e/1FAIpQLSfXYVHkzEEDTycJx-lN8iFcW7rwo6rdEVPjSGIfzvsuvmzUlA/viewform" },
                    { title: "SARS and PPRA Letter of Employment", url: "https://docs.google.com/forms/d/e/1FAIpQLSd0yabWfk6dM9JwDUxRofYdI9m9S66ZbhwlIKMIN3iXXfREdg/viewform" }
                ],
                "Sales Docs": [
                    { title: "Mandates", url: "https://drive.google.com/drive/folders/1P_9v2kTheV4mzPt0h2Jtm4oozt3QrVFG?usp=drive_link" },
                    { title: "Offer To Purchase", url: "https://drive.google.com/drive/folders/1SgDPogFFXti5vMFc7GiPRR_LjIHUySaP?usp=drive_link" }
                ],
                "Bond Approval": [
                    { title: "Get An Ooba Bond", url: "https://my.ooba.co.za/obi/?var1=KW4&var2=&var3=OBI&var4" }
                ],
                "Rentals": [
                    { title: "Red Rabbit", url: "https://www.weconnectu.co.za/redrabbit" },
                    { title: "Rental Documents", url: "https://drive.google.com/drive/folders/1GlY8meqjLJFqTKLSipRr0CFXjgZYrdSE" },
                    { title: "Eviction Secure", url: "https://evictionsecure.co.za/" },
                    { title: "Rental Policy and Procedures", url: "https://drive.google.com/file/d/1mE1lX7e0W-u7b2uSHvZlLMsEwLX8Jcjf/view?usp=drive_link" },
                    { title: "Rental FAQ", url: "https://drive.google.com/file/d/1dlIv_sGXhoSwb7QKm_UiYQCAKF2s6mHQ/view?usp=drive_link" }
                ],
                "Design Templates": [
                    { title: "Mapps To Explore", url: "https://web.facebook.com/groups/236242439163189?_rdc=1&_rdr#" }
                ],
                "KWE WhatsApp Links": [
                    { title: "KWE Business", url: "https://chat.whatsapp.com/Fo9u1JwPQPX5jKFxkxireB" },
                    { title: "KWE Family", url: "https://chat.whatsapp.com/7Vt6td3OTf6AnC9UAZ2NrW" },
                    { title: "KWE Mindset", url: "https://chat.whatsapp.com/BmC5OcpGr0fEsSNjBjs9V6" },
                    { title: "KWE Trading Floor", url: "https://chat.whatsapp.com/KhXyuE7SMBzKa4zmKjT8V2" },
                    { title: "KWE Rentals", url: "https://chat.whatsapp.com/FJjYfQR22CWCJoi14kZxFa" },
                    { title: "KWE Commercial", url: "https://chat.whatsapp.com/GgAtHnEYmXmAQEXzEl0DkC?mode=wwc" }
                ],
                "Partners": [
                    { title: "Van Deventers", url: "https://www.vandeventers.law/" },
                    { title: "LWM Incorporated", url: "https://lmw.co.za/" },
                    { title: "Hammond Pole", url: "https://www.hammondpole.co.za/" },
                    { title: "Ooba", url: "https://www.ooba.co.za/product-determinator-v2/?paid_campaign=search&landing_page=homeloan1&adwords_campaign_id=1615939422&gclid=Cj0KCQjwrfymBhCTARIsADXTabn4IM5wvINZrk6RE8ePkpkWcMaHiH3fzglJthHjrXIPCmY_NrUw8yUaAuwFEALw_wcB" }
                ],
                "Leadership": {
                    "Estelle Ferreira": { type: 'contact', role: 'Principal Property Practitioner', phone: '+27 82 460 6864', email: 'Estelle.Ferreira@kwsa.co.za' },
                    "Shawn Armer": { type: 'contact', role: 'Operating Partner', phone: '+27 81 533 5683', email: 'shawn.armer@kwsa.co.za' },
                    "Dawie Du Toit": { type: 'contact', role: 'Team Leader', phone: '+27 84 062 4865', email: 'dawie.dutoit@kwsa.co.za' },
                    "Rukudzo Jagada": { type: 'contact', role: 'Market Centre Administrator', phone: '+27 78 584 8244', email: 'rukudzo.jagada@kwsa.co.za' },
                    "Casandra Van der Merwe": { type: 'contact', role: 'MCTT', phone: '+27 84 212 1991', email: 'casandra.vdmerwe@kwsa.co.za' },
                    "Francois Muller": { type: 'contact', role: 'Rental Manager', phone: '082 440 2482', email: 'francois.muller@kwsa.co.za' },
                    "Maryna Muller": { type: 'contact', role: 'Rental Administrator', phone: '076 892 2404', email: 'maryna.muller@kwsa.co.za' },
                    "Mornay Cloete": { type: 'contact', role: 'Commercial Department I Corporate Real Estate Consultant | Property Investment Strategist', phone: '+27 82 888 6602', email: 'mornay@emacity.co.za' }
                },
                "Compliance": [
                    { title: "PPRA", url: "https://theppra.org.za/myffc" },
                    { title: "Code of Conduct", url: "https://drive.google.com/file/d/1ngSQQgKzl-3-BQ6VijgiZbyD8Fh8HByB/view?usp=sharing" },
                    { title: "FIC", url: "https://drive.google.com/file/d/12oz_bU_Tqnqlx9LJa3OPz2aY5mCFF80C/view?usp=sharing" }
                ],
                "Resources": [
                    { title: "Keller Ink", url: "https://kellerink.com/" },
                    { title: "CGI Calculator", url: "https://kwecgi.netlify.app/" }
                ]
            };

            const mainTabContainer = document.getElementById('main-tabs-container');
            const contentContainer = document.getElementById('tab-content-area');

            function handleTabClick(tabs, contents, clickedTab) {
                tabs.forEach(t => t.classList.remove('active'));
                contents.forEach(c => c.classList.remove('active'));
                clickedTab.classList.add('active');
                const contentId = clickedTab.dataset.tab;
                document.getElementById(contentId).classList.add('active');
            }

            function handleSubTabClick(tabs, contents, clickedTab) {
                tabs.forEach(t => t.classList.remove('active'));
                contents.forEach(c => c.classList.remove('active'));
                clickedTab.classList.add('active');
                const contentId = clickedTab.dataset.tab;
                document.getElementById(contentId).classList.add('active');
            }

            Object.keys(tabsData).forEach((key, index) => {
                const tabButton = document.createElement('button');
                tabButton.className = 'main-nav-button text-gray-300 bg-gray-800 hover:bg-gray-700 font-medium rounded-lg text-sm px-3 py-2.5 text-center transition';
                tabButton.textContent = key;
                tabButton.dataset.tab = `main-${key.replace(/\s+/g, '-')}`;
                mainTabContainer.appendChild(tabButton);

                const contentDiv = document.createElement('div');
                contentDiv.id = `main-${key.replace(/\s+/g, '-')}`;
                contentDiv.className = 'tab-content mt-6';
                contentContainer.appendChild(contentDiv);

                const data = tabsData[key];

                if (Array.isArray(data)) {
                    const listContainer = document.createElement('div');
                    listContainer.className = 'space-y-4';
                    data.forEach(item => {
                        const itemElement = document.createElement('a');
                        itemElement.href = item.url;
                        itemElement.target = '_blank';
                        itemElement.className = 'block bg-gray-900 p-4 rounded-lg hover:bg-gray-800 transition duration-300';
                        itemElement.innerHTML = `<h3 class="font-semibold text-white">${item.title}</h3>`;
                        listContainer.appendChild(itemElement);
                    });
                    contentDiv.appendChild(listContainer);
                } else {
                    const subTabNav = document.createElement('nav');
                    subTabNav.className = 'mb-4';
                    const subTabContainer = document.createElement('div');
                    subTabContainer.className = 'flex flex-wrap gap-2';
                    subTabNav.appendChild(subTabContainer);
                    const subContentContainer = document.createElement('div');

                    Object.keys(data).forEach((subKey, subIndex) => {
                        const subTabButton = document.createElement('button');
                        subTabButton.className = 'sub-tab text-white bg-gray-700 hover:bg-red-500 font-medium rounded-lg text-xs px-3 py-1.5 text-center transition';
                        subTabButton.textContent = subKey;
                        subTabButton.dataset.tab = `sub-${key.replace(/\s+/g, '-')}-${subKey.replace(/\s+/g, '-')}`;
                        subTabContainer.appendChild(subTabButton);

                        const subContentDiv = document.createElement('div');
                        subContentDiv.id = `sub-${key.replace(/\s+/g, '-')}-${subKey.replace(/\s+/g, '-')}`;
                        subContentDiv.className = 'sub-tab-content bg-gray-900 p-4 rounded-lg';

                        const contact = data[subKey];
                        subContentDiv.innerHTML = `
                            <h3 class="text-lg font-bold text-white">${subKey}</h3>
                            <p class="text-red-400">${contact.role}</p>
                            <div class="mt-3">
                                <a href="tel:${contact.phone}" class="text-gray-300 hover:underline">Phone: ${contact.phone}</a>
                            </div>
                            <div>
                                <a href="mailto:${contact.email}" class="text-gray-300 hover:underline">Email: ${contact.email}</a>
                            </div>`;
                        subContentContainer.appendChild(subContentDiv);

                        if (subIndex === 0) {
                            subTabButton.classList.add('active');
                            subContentDiv.classList.add('active');
                        }
                    });

                    contentDiv.appendChild(subTabNav);
                    contentDiv.appendChild(subContentContainer);

                    const subTabs = contentDiv.querySelectorAll('.sub-tab');
                    const subContents = contentDiv.querySelectorAll('.sub-tab-content');
                    subTabs.forEach(tab => tab.addEventListener('click', () => handleSubTabClick(subTabs, subContents, tab)));
                }

                if (index === 0) {
                    tabButton.classList.add('active');
                    contentDiv.classList.add('active');
                }
            });

            const mainTabs = document.querySelectorAll('#main-tabs-container .main-nav-button');
            const mainContents = document.querySelectorAll('#tab-content-area .tab-content');
            mainTabs.forEach(tab => tab.addEventListener('click', () => handleTabClick(mainTabs, mainContents, tab)));
        });
    </script>
</body>
</html>
